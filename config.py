"""
Proactive AI Friend - Configuration
研究用パラメータと設定
"""

import os
from dotenv import load_dotenv

load_dotenv()

# =============================================================================
# API設定
# =============================================================================
ANTHROPIC_API_KEY = os.getenv("ANTHROPIC_API_KEY")
DISCORD_TOKEN = os.getenv("DISCORD_TOKEN")

# 使用するモデル
LLM_MODEL = "claude-sonnet-4-20250514"

# =============================================================================
# Inner Thoughts パラメータ（研究で調整可能）
# =============================================================================

# 動機づけスコアの閾値（1-5スケール）
# この値以上のスコアの思考のみ発言する
MOTIVATION_THRESHOLD = 3.5

# 思考生成の頻度（秒）
# ユーザーの発言後、この間隔で思考を生成・評価
THOUGHT_GENERATION_INTERVAL = 30

# 沈黙タイムアウト（秒）
# この時間ユーザーが発言しなかったら、AIから話しかける
SILENCE_TIMEOUT = 300  # 5分

# 連続介入の制限
# AIが連続で発言できる最大回数（押しつけがましさ防止）
MAX_CONSECUTIVE_INTERVENTIONS = 2

# 最小介入間隔（秒）
# AIの発言後、次の自発的発言までの最小待機時間
MIN_INTERVENTION_INTERVAL = 60

# =============================================================================
# 記憶システム設定
# =============================================================================

# 短期記憶に保持する会話ターン数
SHORT_TERM_MEMORY_SIZE = 20

# 長期記憶の最大エントリ数
LONG_TERM_MEMORY_SIZE = 100

# 思考リザーバーの最大サイズ
THOUGHT_RESERVOIR_SIZE = 10

# =============================================================================
# 研究用設定
# =============================================================================

# ログ保存先
LOG_DIRECTORY = "research_logs"

# 実験条件（A/Bテスト用）
# "proactive" = Inner Thoughts有効
# "reactive" = 従来の反応型のみ
EXPERIMENT_CONDITION = "proactive"

# ログに含める情報
LOG_THOUGHTS = True          # 生成された思考をログ
LOG_MOTIVATION_SCORES = True # 動機づけスコアをログ
LOG_USER_REACTIONS = True    # ユーザーの反応をログ

# =============================================================================
# ペルソナ設定
# =============================================================================

AI_NAME = "ソラ"
AI_PERSONA = """
あなたは「ソラ」という名前の親しみやすいAIです。
- 性格: 好奇心旺盛で、相手の話に興味を持つ。押しつけがましくなく、自然体。
- 話し方: カジュアルだけど丁寧。絵文字は控えめに使う。
- 特徴: 相手のことを覚えていて、以前の会話を踏まえて話す。
- 目標: ユーザーと良い友達関係を築く。困っているときは助け、楽しいときは一緒に喜ぶ。
"""

# =============================================================================
# 動機づけ評価の基準（Inner Thoughts論文より）
# =============================================================================

MOTIVATION_CRITERIA = """
以下の基準で、この思考を今表現すべきかを1-5で評価してください：

1. 関連性 (Relevance): 現在の会話トピックとどれくらい関連しているか
2. 情報ギャップ (Information Gap): 自分が持っている情報がユーザーにとって新しいか
3. 感情的つながり (Emotional Connection): 共感や感情的サポートになるか
4. タイミング (Timing): 今このタイミングで言うのが適切か
5. 会話バランス (Balance): 最近AIが話しすぎていないか

スコアの目安:
1 = 全く言う必要がない
2 = あまり言う必要がない  
3 = 言ってもいいが、今でなくてもいい
4 = 言った方がいい
5 = 今すぐ言うべき
"""
